# PID제어

### PID제어란?

- 자동제어 방식 중 가장 많이 사용되는 제어방식
- P : Proportinal (비례)
- I : Integral (적분)
- D: Differential (미분)



### P제어

- 조작량을 목표값과 현재 위치와의 차에 비례한 크기가 되도록 한다.
- 미세한 제어를 하기때문에 유연하게 목표값에 접근을 시킬 수 있다.
- 그러나 실제로 제어량이 목표값에 접근할 수록 조작량이 너무 작아져서 제어를 할 수 없는 상태가 됨
  - 목표값이 아주 가까운 제어량의 상태에서 멈추어 버림
  - 즉 아무리 시간이 지나도 완전히 일치 할 수 없게 된다
  - 이런 오차를 **잔류편차**라고 한다.

![](http://www.ktechno.co.kr/pictech/img_pic/pid02.gif)

### PI제어

- 앞에서 설명했던 잔류편차를 없애기 위해 사용하는 것이 PI제어이다.
- 미세한 잔류편차를 시간적으로 계속 누적을 시켜서 조작량을 증가시킨다.
- 조작량이 증가되면서 편차를 조금씩 없애서 목표값에 갈 수 있도록 한다. 
- 일정한 시간이 꼭 필요하기 때문에 응답속도의 문제가 생긴다.
- 즉 외부로 부터 영향을 받았을때에  신속하게 반응 할 수가 없다.

![](http://www.ktechno.co.kr/pictech/img_pic/pid03.gif)

### PID제어

- 앞에서 설명한 PI의 단점을 보완하기 위해 사용한 것이 PID제어 이다.

- 급격히 일어나는 외란에 대헤 편차를 보고 저번의 편차와 차가 큰 경우에 조작량을 증가시킨다.

- 이런 편차를 보는 것이 미분이다. 

  ![](http://www.ktechno.co.kr/pictech/img_pic/pid04.gif)

### PID제어 알고리즘

- PID제어는 연속한 아날로그량을 제어하는 것이 기본이다.
- 그러나 컴퓨터데이터의 입출력은 일정시간 간격으로밖에 할 수  없다.
- 또한 미적분 연산을 요구하기때문에 고성능의컴퓨터가 필요하게 된다.
- 그래서 생겨난 것이 샘플링방식에 적합한 PID연산 방식이다.

```
조작량 = Kp * 편차 + Ki * 편차의 누적값 + Kd * 전회 편차와의 차
             (비례)         (적분)               (미분)
```

- 위의 식은 이번과 저번의 편차의 값만 측정할 수 있으면 조작량을 구할 수 있다.

#### 각 상수의 성질

- Kp, p게인: 목표치에 가는 정도를 결정하는 상수
  - 너무 낮으면 목표값에 도달하기 어렵고 너무 높으면 제어량이 너무커서 진동한다(시소처럼)
- Ki, i게인: 목표치에 대한 정확도를 결정하는 상수
  - 너무 낮으면 목표치에 근접하기 어렵고 너무 높으면 외부변화에 잘 대응하지 않음
  - **드론에서 가장 중요함**
- Kd, d게인: 목표치에 대한 속도를 결정하는 상수
  - p게인으로 부족한 제어량을 보충
  - 순간적으로 제어량을 확 높이면서 목표치에 도달하는 도움닫기 역할
  - p게인과 거의 비슷(낮으면 시간이 오래걸리고 높으면 진동)