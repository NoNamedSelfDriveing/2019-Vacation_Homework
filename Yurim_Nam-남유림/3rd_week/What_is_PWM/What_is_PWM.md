# What is PWM

## PWM
PWM이란, **Pulse Width Modulaton(펄스 폭 변조)**의 줄임말로, 펄스의 폭을 제어하여 전력의 크기를 조절하는 것을 이른다. 주로 LED의 밝기 제어나, DC모터 속도 제어, 사운드 출력 등에 쓰인다.<br>
아날로그의 신호는 우리가 흔히 알고 있듯 여러가지의 연속적인 값들을 가지고 있다. 하지만 그에 비해 디지털 신호는 0과 1, 오직 두 가지의 값밖에 가질 수 없다. 이러한 특징 때문에 두 개의 신호는 각각의 쓰임새를 가지고 있는데, 간혹 이런 상황이 생기곤 한다. <br>

> LED로 예시를 들어보도록 하자. LED는 ON, OFF 두 가지의 상태를 가지고 있다. 이러한 상황에서는 아날로그 신호보다는 디지털 신호를 이용해 LED를 제어하는 것이 더욱 효율적이다. 하지만 LED의 밝기를 조절한다고 하면 어떻게 될까? LED의 밝기는 총 0~255의 값을 가지고 있다. 디지털 신호로는 표현하기 어려운 값인 것이다. 보통 이런 상황에서는 디지털 신호를 아날로그 신호로 바꾸던가(DAC), 디지털 신호로 아날로그 신호를 따라하게(PWM) 된다.

쉽게 말해서, PWM이란 **디지털 신호를 아날로그 신호처럼 흉내내는 것**이다.  <br>

## PWM의 작동 원리
펄스 주기에서 On이 되어있는 비율을 **duty**라고 하는데, 이 duty에 따라 출력 전압이 달리 된다. duty 값이 낮을수록 (duty cycle이라고도 하며, 펄스의 넓이) 출력 전압은 낮고, duty 값이 높을수록 출력 전압은 높다. 

> PWM으로 12v 를 출력하고 싶다면, 0v와 24v를 같은 비율로(duty Cycle 50%)로 하여 이를 빠른 속도로 바꾸어준다. 그렇게 된다면 출력은 같은 비율을 유지하며 0, 24, 0, 24 … 로 빠르게 바뀌게 되는데, 이 때의 평균 전압이 12v가 되어 마치 12v가 출력 전압이 되는 것처럼 작동을 한다.

## PWM을 쓰기 위해 사용하는 레지스터

1. TCNT0
    - 타이머/카운터의 숫자를 저장함
    - 타이머/카운터의 이벤트를 결정
    - 값은 총 0~255로, 255가 넘어갈 시 overflow interrupt가 발생
2. OCR0
    - TCNT0과 계속 비교되는 값
    - 출력 모드와 TCNT0에 따라 0과 1이 출력됨
3. TCCR0
    - PWM 모드를 결정 (Fast, Phase correct)
    - 타이머 분주비 설정